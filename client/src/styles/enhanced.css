:root {
    --bg:#0f172a;
    --bg-panel:#1e293b;
    --text:#f1f5f9;
    --text-soft:#94a3b8;
    --accent:#818cf8;
    --accent-hover:#6366f1;
    --danger:#dc2626;
    --border:#334155;
    --radius:16px;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    color-scheme:dark;
}

html, body, .app-shell { margin:0; min-height:100%; }
body { background:var(--bg); color:var(--text); }
.app-shell { display:flex; flex-direction:column; }

.app-header {
    display:flex; align-items:center; gap:.9rem;
    padding:.9rem 1.4rem;
    background:var(--bg-panel);
    border-bottom:1px solid var(--border);
}
.brand { display:flex; align-items:center; gap:.55rem; }
.logo { font-size:1.6rem; }
.app-header h1 { margin:0; font-size:1.4rem; font-weight:600; }

.app-main { padding:1.4rem 1.4rem 2rem; display:grid; gap:1.4rem; }
.app-main--split { grid-template-columns:340px minmax(0,1fr); align-items:start; }
@media (min-width:1400px){ .app-main--split { grid-template-columns:360px minmax(0,1fr);} }
@media (max-width:880px){
    .app-main--split { grid-template-columns:1fr; }
    .panel-form { position:static !important; max-height:none !important; }
}

.panel {
    background:var(--bg-panel);
    border:1px solid var(--border);
    border-radius:var(--radius);
    padding:1.1rem 1.1rem 1.4rem;
    display:flex; flex-direction:column; gap:1rem;
}
.panel-form { position:sticky; top:1rem; max-height:calc(100vh - 2rem); overflow:auto; }
.panel-output { min-height:480px; }

.panel-header {
    display:flex; justify-content:space-between; align-items:center;
    margin:-.25rem 0 .25rem; padding-bottom:.4rem; border-bottom:1px solid var(--border);
}
.panel-header h2 {
    margin:0; font-size:.85rem; letter-spacing:.08em;
    text-transform:uppercase; font-weight:600; opacity:.85;
}
.panel-tools { display:flex; gap:.4rem; }

.recipe-form { display:flex; flex-direction:column; gap:.85rem; }
.field { display:flex; flex-direction:column; gap:.4rem; }
.field.row { flex-direction:row; align-items:center; gap:.6rem; }
.field-label {
    font-size:.7rem; font-weight:600; text-transform:uppercase;
    letter-spacing:.08em; opacity:.8;
}
.hint { margin:0; font-size:.65rem; color:var(--text-soft); }

.actions { display:flex; gap:.6rem; flex-wrap:wrap; }

.btn {
    --bgc:var(--accent); --col:#fff;
    background:var(--bgc); color:var(--col);
    border:1px solid var(--accent);
    padding:.65rem 1rem;
    border-radius:10px;
    font-size:.75rem; font-weight:600;
    cursor:pointer; line-height:1;
    transition:background .25s;
}
.btn:hover:not(:disabled){ background:var(--accent-hover); }
.btn:disabled { opacity:.55; cursor:not-allowed; }
.btn.ghost {
    background:transparent; color:var(--text-soft);
    border:1px solid var(--border);
}
.btn.ghost:hover:not(:disabled){ background:rgba(255,255,255,.06); }
.btn.subtle {
    background:linear-gradient(135deg,#334155,#1e293b);
    color:var(--text); border:1px solid var(--border);
}
.btn.small { padding:.4rem .55rem; font-size:.6rem; }

.alert {
    border:1px solid var(--border);
    background:#1e293b;
    padding:.55rem .7rem;
    border-radius:10px;
    font-size:.7rem;
}
.alert.error { border-color:var(--danger); color:var(--danger); }

.loader-wrap { padding-top:.25rem; }

.output-surface {
    flex:1; border:1px solid var(--border);
    border-radius:12px; padding:.9rem .9rem 1.2rem;
    background:#1e293b;
    font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size:.78rem; line-height:1.28rem;
    white-space:pre-wrap; overflow:auto; min-height:280px;
}
.output-surface.empty {
    display:flex; align-items:center; justify-content:center;
    text-align:center; color:var(--text-soft);
}

.placeholder p { margin:.2rem 0; }
.placeholder .muted { font-size:.65rem; opacity:.7; }

textarea, input, select {
    font:inherit; color:inherit;
    border:1px solid var(--border);
    background:#1e293b;
    padding:.65rem .7rem;
    border-radius:10px;
    resize:vertical;
}
textarea:focus, input:focus, select:focus {
    outline:2px solid var(--accent);
    outline-offset:2px;
}

.app-footer {
    padding:1rem 1.4rem 2rem;
    text-align:center;
    font-size:.6rem;
    color:var(--text-soft);
}

::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-thumb {
    background:linear-gradient(var(--accent),var(--accent-hover));
    border-radius:20px;
    border:2px solid transparent;
    background-clip:padding-box;
}

@media (prefers-reduced-motion: reduce){
    * { transition:none !important; }
}
.logo-mark {
    width:68px;
    height:68px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:2.6rem;
    line-height:1;
    border-radius:18px;
    background:radial-gradient(circle at 35% 35%, #334155 0%, #1e293b 70%);
    box-shadow:
            0 4px 14px -4px rgba(0,0,0,.6),
            0 0 0 2px rgba(255,255,255,.05),
            0 0 0 6px rgba(129,140,248,.25);
    filter:drop-shadow(0 2px 4px rgba(0,0,0,.4));
    flex-shrink:0;
    position:relative;
    transform:translateZ(0);
}

.logo-mark::after {
    content:"";
    position:absolute;
    inset:4px;
    border-radius:inherit;
    background:linear-gradient(135deg, rgba(129,140,248,.18), rgba(99,102,241,.05));
    pointer-events:none;
}

@media (max-width:640px){
    .logo-mark {
        width:56px;
        height:56px;
        font-size:2.2rem;
        border-radius:16px;
    }
}
.brand-text { line-height:1.1; display:flex; flex-direction:column; }
.brand-title {
    margin:0;
    font-size:1.22rem;
    font-weight:600;
    letter-spacing:.5px;
    display:flex;
    gap:.4ch;
}
.brand-primary { color:var(--text); }
.brand-secondary {
    background:linear-gradient(90deg,var(--accent) 0%,var(--accent-hover) 100%);
    -webkit-background-clip:text;
    color:transparent;
    font-weight:700;
}
.tagline {
    margin:.25rem 0 0;
    font-size:.55rem;
    letter-spacing:.12em;
    text-transform:uppercase;
    color:var(--text-soft);
    font-weight:500;
    opacity:.85;
}
/* Nutrition block (refactored) */
.recipe-display .nutrition-block {
    --nb-radius: var(--radius, 16px);
    --nb-pad-y: 1rem;
    --nb-pad-x: .95rem;
    margin: 1rem 0 0;
    padding: var(--nb-pad-y) var(--nb-pad-x) .9rem;
    border: 1px solid rgba(255,255,255,.08);
    border-radius: var(--nb-radius);
    background:
            linear-gradient(130deg,rgba(255,255,255,.05),rgba(255,255,255,.02)),
            radial-gradient(circle at 75% 25%,rgba(129,140,248,.22),transparent 68%);
    backdrop-filter: blur(5px) saturate(140%);
    -webkit-backdrop-filter: blur(5px) saturate(140%);
    position: relative;
    overflow: hidden;
}

.recipe-display .nutrition-block::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: conic-gradient(from 210deg,
    rgba(129,140,248,0),
    rgba(129,140,248,.32),
    rgba(129,140,248,0) 72%);
    mix-blend-mode: overlay;
    opacity: .5;
}

.recipe-display .nutrition-block__head {
    display: flex;
    align-items: center;
    gap: .55rem;
    margin: 0 0 .65rem;
}

.recipe-display .nutrition-block__head h5 {
    margin: 0;
    font: 600 .72rem/1.1 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    letter-spacing: .08em;
    text-transform: uppercase;
    background: linear-gradient(90deg,var(--accent),var(--accent-hover));
    -webkit-background-clip: text;
    color: transparent;
}

.recipe-display .nutrition-emoji {
    font-size: 1.05rem;
    animation: floatY 6s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce){
    .recipe-display .nutrition-emoji { animation: none; }
}

.recipe-display .nutrition-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: .4rem;
    font-size: .7rem;
}

.recipe-display .nutrition-list li {
    display: flex;
    align-items: baseline;
    gap: .5rem;
    background: rgba(255,255,255,.05);
    padding: .45rem .6rem;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,.065);
    position: relative;
}

.recipe-display .nutrition-list li::before {
    content: "";
    flex: 1;
    height: 1px;
    background: repeating-linear-gradient(
            to right,
            rgba(255,255,255,.32) 0 6px,
            transparent 6px 12px
    );
    order: 2;
    align-self: center;
    opacity: .55;
}

.recipe-display .nutrition-list .nf-label {
    order: 1;
    font-weight: 600;
    letter-spacing: .05em;
    text-transform: uppercase;
    font-size: .58rem;
    color: var(--text-soft);
    white-space: nowrap;
}

.recipe-display .nutrition-list .nf-value {
    order: 3;
    font-weight: 500;
    font-size: .7rem;
    color: var(--text);
    white-space: nowrap;
}

.recipe-display .nutrition-list li:hover {
    border-color: rgba(129,140,248,.45);
    background: rgba(129,140,248,.16);
    transition: background .25s, border-color .25s;
}

/* Ensure single definition of keyframes somewhere globally */
/* @keyframes floatY {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
} */

/* Compact nutrition block variant */
.nutrition-block--compact {
    max-width: 240px;
    padding: .65rem .7rem .55rem;
    border-radius: 12px;
    font-size: 90%;
}

.nutrition-block--compact .nutrition-block__head {
    margin: 0 0 .5rem;
    gap: .45rem;
}

.nutrition-block--compact .nutrition-block__head h5 {
    font-size: .58rem;
    letter-spacing: .09em;
}

.nutrition-block--compact .nutrition-emoji {
    font-size: .85rem;
}

.nutrition-block--compact .nutrition-list {
    gap: .3rem;
    font-size: .6rem;
}

.nutrition-block--compact .nutrition-list li {
    padding: .35rem .5rem;
    border-radius: 8px;
}

.nutrition-block--compact .nf-label {
    font-size: .5rem;
    letter-spacing: .05em;
}

.nutrition-block--compact .nf-value {
    font-size: .58rem;
}

@media (max-width: 480px) {
    .nutrition-block--compact {
        max-width: 100%;
    }
}

/* Side-by-side layout for ingredients + nutrition */
.recipe-meta-row {
    display: flex;
    gap: 1rem;
    align-items: stretch;
    margin: 1rem 0 0;
    flex-wrap: wrap;
}

.recipe-panel,
.recipe-meta-row .nutrition-block {
    border: 1px solid rgba(255,255,255,.08);
    border-radius: 18px;
    background:
            linear-gradient(130deg,rgba(255,255,255,.05),rgba(255,255,255,.02)),
            radial-gradient(circle at 75% 25%,rgba(129,140,248,.25),transparent 70%);
    backdrop-filter: blur(5px) saturate(140%);
    -webkit-backdrop-filter: blur(5px) saturate(140%);
    position: relative;
    overflow: hidden;
    flex: 1 1 260px;
    padding: 1rem .95rem .9rem;
    min-width: 240px;
}

.ingredients-panel .section-heading {
    margin: 0 0 .65rem;
    font-size: .8rem;
    letter-spacing: .07em;
    text-transform: uppercase;
    background: linear-gradient(90deg,var(--accent),var(--accent-hover));
    -webkit-background-clip: text;
    color: transparent;
}

.ingredients-list {
    list-style: disc;
    margin: 0 0 0 1.1rem;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: .4rem;
    font-size: .7rem;
}

.recipe-meta-row .nutrition-block {
    padding: 1rem .95rem .9rem;
}

.recipe-meta-row .nutrition-block h5 {
    font-size: .7rem;
}

@media (max-width: 760px) {
    .recipe-meta-row {
        flex-direction: column;
    }
    .recipe-panel,
    .recipe-meta-row .nutrition-block {
        min-width: 100%;
    }
}

